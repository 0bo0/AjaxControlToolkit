<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
This sample demonstrates how you can perform binding imperatively 
by handling the itemRendered event. 

$.binding() is used to display the value of a data item property.
The Select command is set by using Sys.setCommand().
-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Item Rendered Event</title>
    <link href="../styles/Images.css" rel="stylesheet" type="text/css"/>

    <script src="../Scripts/MicrosoftAjax/jQueryStart.debug.js" type="text/javascript"></script>

    <script type="text/javascript">
        var gallery = [
            { Name: "Seagull reflections",      Uri: "../images/p52.jpg" },
            { Name: "Pier",                     Uri: "../images/p59.jpg" },
            { Name: "Giraffe Zoom",             Uri: "../images/p183.jpg" },
            { Name: "Oryx",                     Uri: "../images/p172.jpg" }
        ];

        Sys.require(Sys.components.dataView);
        
        Sys.onReady(function() {
            var master = $(".imageslist").dataView( {
                data: gallery,
                itemRendered: imageRendered,
                selectedItemClass: "selecteditem",
                initialSelectedIndex: 0
            }).get(0);

             $("#detailView")
            .dataView({
                itemRendered: detailRendered
            })
            .binding("data", master, "selectedData");
        });

        function imageRendered(dataView, ctx) {
            $(ctx.nodes).setCommand("select");
            $.binding($("img", ctx.nodes)[0], "src", ctx.dataItem, "Uri");
            $.binding($("div", ctx.nodes)[0], "innerHTML", ctx.dataItem, "Name");
        }

        function detailRendered(dataView, ctx) {
            $.binding($("img", ctx.nodes)[0], "src", ctx.dataItem, "Uri");
            $.binding($("input", ctx.nodes)[0], "value", ctx.dataItem, "Name");
        }      

    </script>
</head>
<body>
    <!--Master View-->
    <div class="imageslist sys-template">
        <span class="namedlistitem">
            <img/>
            <div></div>
        </span>
    </div>
      
    <!--Detail View-->
    <div id="detailView" class="sys-template">
        <span class="nameddetailitem">
            <img/>
            <input type="text" />
        </span>
     </div>
</body>
</html>
