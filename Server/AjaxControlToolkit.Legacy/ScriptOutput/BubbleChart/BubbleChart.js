Type.registerNamespace("Sys.Extended.UI");Sys.Extended.UI.BubbleChart=function(c){var a=this;Sys.Extended.UI.BubbleChart.initializeBase(a,[c]);var b=a.get_id();b=b.replace("_ctl00","");a._parentDiv=document.getElementById(b+"__ParentDiv");a._chartWidth="300";a._chartHeight="200";a._chartTitle="";a._bubbleChartClientValues=null;a._theme="BubbleChart";a._yAxisLines=6;a._xAxisLines=6;a._bubbleSizes=5;a._chartTitleColor="";a._yAxisLineColor="";a._xAxisLineColor="";a._baseLineColor="";a._tooltipBackgroundColor="#ffffff";a._tooltipFontColor="#0E426C";a._tooltipBorderColor="#B85B3E";a._xAxisLabel="";a._yAxisLabel="";a._bubbleLabel="";a._axislabelFontColor="#000000";a.yMax=0;a.yMin=0;a.xMax=0;a.xMin=0;a.dataMax=0;a.dataMin=0;a.yRoundedIntervalLabelSize=0;a.xRoundedIntervalLabelSize=0;a.roundedBubbleSize=0;a.startX=0;a.startY=0;a.endX=0;a.endY=0;a.xInterval=0;a.yInterval=0;a.charLength=3.5;a._divTooltip=null};Sys.Extended.UI.BubbleChart.prototype={initialize:function(){var a=this;Sys.Extended.UI.BubbleChart.callBaseMethod(a,"initialize");if(!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"))throw"Current version of browser does not support SVG.";if(a._yAxisLines==0)a._yAxisLines=6;if(a._xAxisLines==0)a._xAxisLines=6;if(a._bubbleSizes==0)a._bubbleSizes=5;a.generateTooltipDiv();a.generateBubbleChart()},dispose:function(){Sys.Extended.UI.BubbleChart.callBaseMethod(this,"dispose")},generateTooltipDiv:function(){var a=this;a._divTooltip=$common.createElementFromTemplate({nodeName:"div",properties:{id:a.get_id()+"_tooltipDiv",style:{position:"absolute",backgroundColor:a._tooltipBackgroundColor,borderStyle:"solid",borderWidth:"5px",borderColor:a._tooltipBorderColor,left:"0px",top:"0px",color:a._tooltipFontColor,visibility:"hidden",zIndex:"10000",padding:"10px"}}},a._parentDiv)},generateBubbleChart:function(){var a=this;a.calculateMinMaxValues();a.calculateBubbleSize();a.calculateAxisValues();var b=a.intializeSVG();b=b+String.format('<text x="{0}" y="{1}" id="ChartTitle" style="fill:{3}">{2}</text>',parseInt(a._chartWidth)/2-a._chartTitle.length*a.charLength,parseInt(a._chartHeight)*5/100,a._chartTitle,a._chartTitleColor);a.calculateIntervals();b=b+a.drawBackgroundHorizontalLines();b=b+a.drawBackgroundVerticalLines();b=b+a.drawBaseLines();b=b+a.drawAxisValues();a._parentDiv.innerHTML=a._parentDiv.innerHTML+b;a.drawBubbles(a,0)},intializeSVG:function(){var a=this,b=String.format('<?xml-stylesheet type="text/css" href="{0}.css"?>',a._theme);b=String.format('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="{0}" height="{1}" preserveAspectRatio="xMidYMid meet" viewbox="0 0 {2} {3}" style="position: relative; display: block;" onload="init(evt)">',a._chartWidth,a._chartHeight,parseFloat(a._chartWidth)*.99,parseFloat(a._chartHeight)*.99);b=b+String.format('<path fill="none" stroke-opacity="1" fill-opacity="1" stroke-linejoin="round" stroke-linecap="square" d="M5 {0} {1} {0} {1} {2} 5 {2} z"/>',parseInt(a._chartHeight)*1/10+5,parseInt(a._chartWidth)-5,parseInt(a._chartHeight)-parseInt(a._chartHeight)*1/10);b=b+String.format('<path id="ChartBackGround" stroke="" d="M0 0 {0} 0 {0} {1} 0 {1} z"/>',a._chartWidth,parseInt(a._chartHeight)-5);b=b+String.format('<path fill="#ffffff" stroke-opacity="1" fill-opacity="0" stroke-linejoin="round" stroke-linecap="square" stroke="" d="M5 {0} {1} {0} {1} {2} 5 {2} z" />',parseInt(a._chartHeight)*1/10+5,parseInt(a._chartWidth)-5,parseInt(a._chartHeight)-parseInt(a._chartHeight)*1/10);return b},drawBubbles:function(a,b){a._parentDiv.innerHTML=a._parentDiv.innerHTML.replace("</svg>","")+String.format('<circle id="Dot{4}" cx="{0}" cy="{1}" r="{2}" style="fill:{3};stroke:{3}" onmouseover="ShowTooltip(this, evt,\'{5}\',{6}, \'{7}\')" onmouseout="HideTooltip(this, evt)"></circle></svg>',a.startX+Math.round(parseFloat(a._bubbleChartClientValues[b].X)/a.xRoundedIntervalLabelSize*a.xInterval),a.startY+Math.round(-1*parseFloat(a._bubbleChartClientValues[b].Y)/a.yRoundedIntervalLabelSize*a.yInterval),Math.round(parseFloat(a._bubbleChartClientValues[b].Data)/a.roundedBubbleSize*a._bubbleSizes),a._bubbleChartClientValues[b].BubbleColor,b+1,a._bubbleChartClientValues[b].Category,a._bubbleChartClientValues[b].Data,a._bubbleLabel);b++;b<a._bubbleChartClientValues.length&&setTimeout(function(){a.drawBubbles(a,b)},400)},calculateMinMaxValues:function(){var a=this;for(var b=0;b<a._bubbleChartClientValues.length;b++)if(b==0){a.dataMax=parseFloat(a._bubbleChartClientValues[b].Data);a.dataMin=parseFloat(a._bubbleChartClientValues[b].Data);a.yMax=parseFloat(a._bubbleChartClientValues[b].Y);a.yMin=parseFloat(a._bubbleChartClientValues[b].Y);a.xMax=parseFloat(a._bubbleChartClientValues[b].X);a.xMin=parseFloat(a._bubbleChartClientValues[b].X)}else{if(parseFloat(a._bubbleChartClientValues[b].Data)>a.dataMax)a.dataMax=parseFloat(a._bubbleChartClientValues[b].Data);if(parseFloat(a._bubbleChartClientValues[b].Data)<a.dataMin)a.dataMin=parseFloat(a._bubbleChartClientValues[b].Data);if(parseFloat(a._bubbleChartClientValues[b].X)>a.xMax)a.xMax=parseFloat(a._bubbleChartClientValues[b].X);if(parseFloat(a._bubbleChartClientValues[b].Data)<a.xMin)a.xMin=parseFloat(a._bubbleChartClientValues[b].X);if(parseFloat(a._bubbleChartClientValues[b].Y)>a.yMax)a.yMax=parseFloat(a._bubbleChartClientValues[b].Y);if(parseFloat(a._bubbleChartClientValues[b].Y)<a.yMin)a.yMin=parseFloat(a._bubbleChartClientValues[b].Y)}if(a.xMin<0)a._xAxisLines=Math.round(a._xAxisLines/2);if(a.yMin<0)a._yAxisLines=Math.round(a._yAxisLines/2)},calculateBubbleSize:function(){var b,d,c,a;c=this.dataMax;a=c/(this._bubbleSizes-1);d=Math.ceil(Math.log(a)/Math.log(10)-1);b=Math.pow(10,d);this.roundedBubbleSize=Math.ceil(a/b)*b},calculateAxisValues:function(){var a=this,d,b;if(a.yMin<0)d=a.yMax>Math.abs(a.yMin)?a.yMax:Math.abs(a.yMin);else d=a.yMax;b=d/(a._yAxisLines-1);if(b<1)a.yRoundedIntervalLabelSize=b.toFixed(1);else{x=Math.ceil(Math.log(b)/Math.log(10)-1);pow10x=Math.pow(10,x);a.yRoundedIntervalLabelSize=Math.ceil(b/pow10x)*pow10x}var e,c;if(a.xMin<0)e=a.xMax>Math.abs(a.xMin)?a.xMax:Math.abs(a.xMin);else e=a.xMax;c=e/(a._xAxisLines-1);if(b<1)a.xRoundedIntervalLabelSize=c.toFixed(1);else{x=Math.ceil(Math.log(c)/Math.log(10)-1);pow10x=Math.pow(10,x);a.xRoundedIntervalLabelSize=Math.ceil(c/pow10x)*pow10x}},calculateIntervals:function(){var a=this;a.endX=parseFloat(a._chartWidth)-parseFloat(a._chartWidth)*5/100;if(a.xMin<0)a.startX=Math.round(parseFloat(a._chartWidth)+parseFloat(a._chartWidth)*10/100)/2+.5;else a.startX=parseFloat(a._chartWidth)*20/100+.5;if(a.xMin<0)a.xInterval=(a.endX-a.startX)/a._xAxisLines;else a.xInterval=Math.round((a.endX-a.startX)/a._xAxisLines);if(a.yMin<0)a.startY=Math.round(parseInt(a._chartHeight)-parseInt(a._chartHeight)*5/100)/2+.5;else a.startY=Math.round(parseInt(a._chartHeight)-parseInt(a._chartHeight)*20/100)+.5;a.yInterval=a.startY/(a._yAxisLines+1);a.endY=a.startY-a.yInterval*a._yAxisLines},drawBackgroundHorizontalLines:function(){var e='<path id="HorizontalLine" d="M{0} {2} {1} {2}" style="stroke:{3}"></path>',d='<path d="M{0} {2} {1} {2}" id="HorizontalLine" style="stroke:{3}"></path>',a=this;for(var c="",b=1;b<=a._yAxisLines;b++)c=c+String.format(d,a.startX,a.endX,a.startY-a.yInterval*b,a._xAxisLineColor);if(a.yMin<0)for(var b=1;b<=a._yAxisLines;b++)c=c+String.format(d,a.startX,a.endX,a.startY+a.yInterval*b,a._xAxisLineColor);if(a.xMin<0)for(var b=1;b<=a._yAxisLines;b++)c=c+String.format(e,a.startX,a.startX-a.xInterval*a._xAxisLines,a.startY-a.yInterval*b,a._xAxisLineColor);if(a.xMin<0&&a.yMin<0)for(var b=1;b<=a._yAxisLines;b++)c=c+String.format(e,a.startX,a.startX-a.xInterval*a._xAxisLines,a.startY+a.yInterval*b,a._xAxisLineColor);return c},drawBackgroundVerticalLines:function(){var e='<path id="VerticalLine" d="M{0} {1} {0} {2}" style="stroke:{3}"></path>',d='<path d="M{0} {1} {0} {2}" id="VerticalLine" style="stroke:{3}"></path>',a=this;for(var c="",b=1;b<=a._xAxisLines;b++)c=c+String.format(d,a.startX+a.xInterval*b,a.startY,a.endY,a._yAxisLineColor);if(a.xMin<0)for(var b=1;b<=a._xAxisLines;b++)c=c+String.format(d,a.startX-a.xInterval*b,a.startY,a.endY,a._yAxisLineColor);if(a.yMin<0)for(var b=1;b<=a._xAxisLines;b++)c=c+String.format(e,a.startX+a.xInterval*b,a.startY,a.startY+a.yInterval*a._yAxisLines,a._yAxisLineColor);if(a.xMin<0&&a.yMin<0)for(var b=1;b<=a._xAxisLines;b++)c=c+String.format(e,a.startX-a.xInterval*b,a.startY,a.startY+a.yInterval*a._yAxisLines,a._yAxisLineColor);return c},drawBaseLines:function(){var e='<path d="M{0} {2} {1} {2}" id="BaseLine" style="stroke:{3}"></path>',d='<path d="M{0} {1} {0} {2}" id="BaseLine" style="stroke:{3}"></path>',f='<path d="M{0} {1} {2} {1}" id="BaseLine" style="stroke:{3}"></path>',a=this,b="";b=b+String.format(f,a.startX,a.startY,a.endX,a._baseLineColor);b=b+String.format(d,a.startX,a.startY,a.startY+4,a._baseLineColor);b=b+String.format(d,a.startX,a.startY,a.endY,a._baseLineColor);b=b+String.format(f,a.startX,a.startY,a.startX+4,a._baseLineColor);for(var c=0;c<=a._yAxisLines;c++)b=b+String.format(e,a.startX-4,a.startX,a.startY-a.yInterval*c,a._baseLineColor);if(a.yMin<0){for(var c=1;c<=a._yAxisLines;c++)b=b+String.format(e,a.startX-4,a.startX,a.startY+a.yInterval*c,a._baseLineColor);b=b+String.format(d,a.startX-a.xInterval*a._xAxisLines,a.startY,a.startY+4,a._baseLineColor);b=b+String.format(d,a.startX,a.startY,a.startY+a.yInterval*a._yAxisLines,a._baseLineColor)}for(var c=0;c<=a._xAxisLines;c++)b=b+String.format(d,a.startX+a.xInterval*c,a.startY,a.startY+4,a._baseLineColor);if(a.xMin<0){for(var c=1;c<=a._xAxisLines;c++)b=b+String.format(d,a.startX-a.xInterval*c,a.startY,a.startY+4,a._baseLineColor);b=b+String.format(e,a.startX,a.startX-a.xInterval*a._xAxisLines,a.startY,a._baseLineColor)}return b},drawAxisValues:function(){var f=5.5,c=10,a=this;for(var d="",e=0,b=1;b<=a._yAxisLines;b++){e=(a.yRoundedIntervalLabelSize*c*b/c).toString().length*f;d=d+String.format('<text id="ValueAxis" x="{0}" y="{1}">{2}</text>',a.startX-e-c,a.startY-a.yInterval*b+4,a.yRoundedIntervalLabelSize*c*b/c)}if(a.yMin<0)for(var b=1;b<=a._yAxisLines;b++){e=(a.yRoundedIntervalLabelSize*c*b/c).toString().length*f+f;d=d+String.format('<text id="ValueAxis" x="{0}" y="{1}">-{2}</text>',a.startX-e-c,a.startY+a.yInterval*b+4,a.yRoundedIntervalLabelSize*c*b/c)}for(var b=1;b<=a._xAxisLines;b++){e=(a.xRoundedIntervalLabelSize*c*b/c).toString().length*f;d=d+String.format('<text id="SeriesAxis" x="{0}" y="{1}">{2}</text>',Math.round(a.startX+a.xInterval*b-e/2),a.startY+Math.round(a.yInterval*25/100)+5,a.xRoundedIntervalLabelSize*c*b/c)}if(a.xMin<0)for(var b=1;b<=a._xAxisLines;b++){e=(a.xRoundedIntervalLabelSize*c*b/c).toString().length*f+f;d=d+String.format('<text id="SeriesAxis" x="{0}" y="{1}">-{2}</text>',Math.round(a.startX-a.xInterval*b-e/2),a.startY+Math.round(a.yInterval*25/100)+5,a.xRoundedIntervalLabelSize*c*b/c)}var g;if(a.yMin<0)g=Math.round(a.startY+a.yInterval*a._yAxisLines-(a.startY-a.yInterval*a._yAxisLines))/2;else g=Math.round((a.startY-a.endY)/2);d=d+String.format('<text id="AxisLabels"  x="{0}" y="{1}" style="fill:{3};" transform="rotate(-90, {0}, {1})">{2}</text>',Math.round(parseFloat(a._chartWidth)*5/100),g+a._yAxisLabel.toString().length*a.charLength,a._yAxisLabel,a._axislabelFontColor);d=d+String.format('<text id="AxisLabels" x="{0}" y="{1}" style="fill:{3};">{2}</text>',Math.round(parseInt(a._chartWidth)/2-a._xAxisLabel.toString().length*a.charLength/2),Math.round(parseInt(a._chartHeight)*90/100+5),a._xAxisLabel,a._axislabelFontColor);return d},get_chartWidth:function(){return this._chartWidth},set_chartWidth:function(a){this._chartWidth=a},get_chartHeight:function(){return this._chartHeight},set_chartHeight:function(a){this._chartHeight=a},get_chartTitle:function(){return this._chartTitle},set_chartTitle:function(a){this._chartTitle=a},get_BubbleChartClientValues:function(){return this._bubbleChartClientValues},set_BubbleChartClientValues:function(a){this._bubbleChartClientValues=a},get_theme:function(){return this._theme},set_theme:function(a){this._theme=a},get_yAxisLines:function(){return this._yAxisLines},set_yAxisLines:function(a){this._yAxisLines=a},get_xAxisLines:function(){return this._xAxisLines},set_xAxisLines:function(a){this._xAxisLines=a},get_chartTitleColor:function(){return this._chartTitleColor},set_chartTitleColor:function(a){this._chartTitleColor=a},get_yAxisLineColor:function(){return this._yAxisLineColor},set_yAxisLineColor:function(a){this._yAxisLineColor=a},get_xAxisLineColor:function(){return this._xAxisLineColor},set_xAxisLineColor:function(a){this._xAxisLineColor=a},get_bubbleSizes:function(){return this._bubbleSizes},set_bubbleSizes:function(a){this._bubbleSizes=a},get_baseLineColor:function(){return this._baseLineColor},set_baseLineColor:function(a){this._baseLineColor=a},get_tooltipBackgroundColor:function(){return this.tooltipBackgroundColor},set_tooltipBackgroundColor:function(a){this.tooltipBackgroundColor=a},get_tooltipFontColor:function(){return this._tooltipFontColor},set_tooltipFontColor:function(a){this._tooltipFontColor=a},get_tooltipBorderColor:function(){return this._tooltipBorderColor},set_tooltipBorderColor:function(a){this._tooltipBorderColor=a},get_xAxisLabel:function(){return this._xAxisLabel},set_xAxisLabel:function(a){this._xAxisLabel=a},get_yAxisLabel:function(){return this._yAxisLabel},set_yAxisLabel:function(a){this._yAxisLabel=a},get_bubbleLabel:function(){return this._bubbleLabel},set_bubbleLabel:function(a){this._bubbleLabel=a},get_axislabelFontColor:function(){return this._axislabelFontColor},set_axislabelFontColor:function(a){this._axislabelFontColor=a}};Sys.Extended.UI.BubbleChart.registerClass("Sys.Extended.UI.BubbleChart",Sys.Extended.UI.ControlBase);Sys.registerComponent(Sys.Extended.UI.BubbleChart,{name:"BubbleChart",parameters:[{name:"BubbleChartClientValues",type:"BubbleChartValue[]"}]});