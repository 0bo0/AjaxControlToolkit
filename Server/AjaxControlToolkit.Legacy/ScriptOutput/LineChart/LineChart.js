Type.registerNamespace("Sys.Extended.UI");Sys.Extended.UI.LineChart=function(c){var a=this;Sys.Extended.UI.LineChart.initializeBase(a,[c]);var b=a.get_id();b=b.replace("_ctl00","");a._parentDiv=document.getElementById(b+"__ParentDiv");a._chartWidth="300";a._chartHeight="300";a._chartTitle="";a._categoriesAxis="";a._series=null;a._chartType=Sys.Extended.UI.ChartType.Basic;a._theme="LineChart";a._valueAxisLines=9;a._chartTitleColor="";a._valueAxisLineColor="";a._categoryAxisLineColor="";a._baseLineColor="";a._tooltipBackgroundColor="#ffffff";a._tooltipFontColor="#0E426C";a._tooltipBorderColor="#B85B3E";a._areaDataLabel="";a.yMax=0;a.yMin=0;a.roundedTickRange=0;a.startX=0;a.startY=0;a.endX=0;a.endY=0;a.xInterval=0;a.yInterval=0;a.arrXAxis;a.arrXAxisLength=0;a.charLength=3.5;a.arrCombinedData=null;a._toolTipDiv};Sys.Extended.UI.LineChart.prototype={initialize:function(){var a=this;Sys.Extended.UI.LineChart.callBaseMethod(a,"initialize");if(!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"))throw"Browser does not support SVG.";if(a._valueAxisLines==0)a._valueAxisLines=9;a.generateTooltipDiv();a.generateLineChart()},dispose:function(){Sys.Extended.UI.LineChart.callBaseMethod(this,"dispose")},generateTooltipDiv:function(){var a=this;a._divTooltip=$common.createElementFromTemplate({nodeName:"div",properties:{id:a.get_id()+"_tooltipDiv",style:{position:"absolute",backgroundColor:a._tooltipBackgroundColor,borderStyle:"solid",borderWidth:"5px",borderColor:a._tooltipBorderColor,left:"0px",top:"0px",color:a._tooltipFontColor,visibility:"hidden",zIndex:"10000",padding:"10px"}}},a._parentDiv)},generateLineChart:function(){var a=this;a.arrXAxis=a._categoriesAxis.split(",");a.arrXAxisLength=a.arrXAxis.length;a.calculateMinMaxValues();a.calculateInterval();a.calculateValueAxis();var b=a.initializeSVG();b=b+String.format('<text x="{0}" y="{1}" id="ChartTitle" style="fill:{3}">{2}</text>',parseInt(a._chartWidth)/2-a._chartTitle.length*a.charLength,parseInt(a._chartHeight)*5/100,a._chartTitle,a._chartTitleColor);b=b+a.drawBackgroundHorizontalLines();b=b+a.drawBackgroundVerticalLines();b=b+a.drawBaseLines();b=b+a.drawLegendArea();b=b+a.drawAxisValues();a._parentDiv.innerHTML=a._parentDiv.innerHTML+b;a.drawLines()},calculateInterval:function(){var a=this;a.startX=a._chartWidth*10/100+.5;a.endX=parseInt(a._chartWidth)-4.5;if(a.yMin>=0)a.startY=Math.round(parseInt(a._chartHeight)-parseInt(a._chartHeight)*24/100)+.5;else a.startY=Math.round(parseInt(a._chartHeight)-parseInt(a._chartHeight)*12/100)/2+.5;a.yInterval=a.startY/(a._valueAxisLines+1)},calculateMinMaxValues:function(){var f=null,a=this,g,d,e;if(a._chartType==Sys.Extended.UI.ChartType.Basic)for(var b=0;b<a._series.length;b++){e=[];for(var c=0;c<a._series[b].Data.length;c++)e[c]=a._series[b].Data[c];g=Math.max.apply(f,e);d=Math.min.apply(f,e);if(b==0){a.yMax=g;a.yMin=d}else{if(g>a.yMax)a.yMax=g;if(d<a.yMin)a.yMin=d}}else{a.arrCombinedData=f;for(var b=0;b<a._series.length;b++){e=[];for(var c=0;c<a._series[b].Data.length;c++)e[c]=a._series[b].Data[c];if(a.arrCombinedData==f)a.arrCombinedData=e;else for(c=0;c<a._series[b].Data.length;c++)a.arrCombinedData[c]=parseFloat(a.arrCombinedData[c])+parseFloat(e[c])}for(var b=0;b<a._series.length;b++){d=Math.min.apply(f,a._series[b].Data);if(b==0)a.yMin=d;else if(d<a.yMin)a.yMin=d}a.yMax=Math.max.apply(f,a.arrCombinedData)}if(a.yMin<0)a._valueAxisLines=Math.round(a._valueAxisLines/2)},calculateValueAxis:function(){var a=this,d,b,e,c;if(a.yMin>=0)d=a.yMax;else d=a.yMax>Math.abs(a.yMin)?a.yMax:Math.abs(a.yMin);b=d/(a._valueAxisLines-1);if(b<1)a.roundedTickRange=b.toFixed(1);else{e=Math.ceil(Math.log(b)/Math.log(10)-1);c=Math.pow(10,e);a.roundedTickRange=Math.ceil(b/c)*c}a.startX=a.startX+(a.roundedTickRange*10*a._valueAxisLines/10).toString().length*a.charLength},drawBackgroundHorizontalLines:function(){var d='<path d="M{0} {2} {1} {2}" id="HorizontalLine" style="stroke:{3}"></path>',a=this;for(var c="",b=1;b<=a._valueAxisLines;b++)c=c+String.format(d,a.startX,a.endX,a.startY-a.yInterval*b,a._categoryAxisLineColor);if(a.yMin<0)for(var b=1;b<=a._valueAxisLines;b++)c=c+String.format(d,a.startX,a.endX,a.startY+a.yInterval*b,a._categoryAxisLineColor);return c},drawBackgroundVerticalLines:function(){var d='<path id="VerticalLine" d="M{0} {1} {0} {2}" style="stroke:{3}"></path>',a=this,c="";a.xInterval=Math.round((parseInt(a._chartWidth)-a.startX)/a.arrXAxisLength);for(var b=0;b<a.arrXAxisLength;b++)c=c+String.format(d,parseInt(a._chartWidth)-5-a.xInterval*b,a.startY-a.yInterval*a._valueAxisLines,a.startY,a._valueAxisLineColor);if(a.yMin<0)for(var b=0;b<a.arrXAxisLength;b++)c=c+String.format(d,parseInt(a._chartWidth)-5-a.xInterval*b,a.startY+a.yInterval*a._valueAxisLines,a.startY,a._valueAxisLineColor);return c},drawBaseLines:function(){var e='<path d="M{0} {2} {1} {2}" id="BaseLine" style="stroke:{3}"></path>',d='<path d="M{0} {1} {0} {2}" id="BaseLine" style="stroke:{3}"></path>',a=this,b="";b=b+String.format('<path d="M{0} {1} {2} {1}" id="BaseLine" style="stroke:{3}"></path>',a.startX,a.startY,a.endX,a._baseLineColor);b=b+String.format(d,a.startX,a.startY-a.yInterval*a._valueAxisLines,a.startY,a._baseLineColor);b=b+String.format(d,a.startX,a.startY,a.startY+4,a._baseLineColor);for(var c=0;c<a.arrXAxisLength;c++)b=b+String.format(d,parseInt(a._chartWidth)-5-a.xInterval*c,a.startY,a.startY+4,a._baseLineColor);for(var c=0;c<=a._valueAxisLines;c++)b=b+String.format(e,a.startX-4,a.startX,a.startY-a.yInterval*c,a._baseLineColor);if(a.yMin<0){b=b+String.format(d,a.startX,a.startY+a.yInterval*a._valueAxisLines,a.startY,a._baseLineColor);for(var c=1;c<=a._valueAxisLines;c++)b=b+String.format(e,a.startX-4,a.startX,a.startY+a.yInterval*c,a._baseLineColor)}return b},drawLegendArea:function(){var e=100,a=this;for(var c="",j=parseInt(a._chartHeight)*82/e+5,d=7.5,o=7.5,f=5,m=0,b=0;b<a._series.length;b++)m=m+a._series[b].Name.length;var g=Math.round(m*5/2)+Math.round((d+f*2)*a._series.length),n=false;if(g>parseInt(a._chartWidth)/2){g=g/2;n=true}c=c+"<g>";c=c+String.format('<path d="M{0} {1} {2} {1} {2} {3} {0} {3} z" id="LegendArea" stroke=""></path>',parseInt(a._chartWidth)*50/e-g/2,j,Math.round(parseInt(a._chartWidth)*50/e+m*5)+Math.round((d+f*2)*a._series.length),Math.round(parseInt(a._chartHeight)*97.5/e));for(var i=parseInt(a._chartWidth)*50/e-g/2+5+d+f,l=i,h=parseInt(a._chartWidth)*50/e-g/2+5,k=h,b=0;b<a._series.length;b++){if(n&&b==Math.round(a._series.length/2)){i=parseInt(a._chartWidth)*50/e-g/2+5+d+f;l=i;h=parseInt(a._chartWidth)*50/e-g/2+5;k=h;j=parseInt(a._chartHeight)*89/e+5;n=false}h=k;i=l;c=c+String.format('<path d="M{0} {1} {2} {1} {2} {3} {0} {3} z" id="Legend{4}" style="fill:{5}"></path>',h,j+o,h+d,j+15,b+1,a._series[b].LineColor);c=c+String.format('<text x="{0}" y="{1}" id="LegendText">{2}</text>',i,j+15,a._series[b].Name);if(a._series[b].Name.length>10){k=h+a._series[b].Name.length*5+d+f*2;l=i+a._series[b].Name.length*5+d+f*2}else{k=k+a._series[b].Name.length*6+d+f*2;l=l+a._series[b].Name.length*6+d+f*2}}c=c+"</g>";return c},drawAxisValues:function(){var a=this;for(var c="",d=0,b=0;b<a.arrXAxisLength;b++){d=a.arrXAxis[b].toString().length*a.charLength;c=c+String.format('<text id="SeriesAxis" x="{0}" y="{1}" fill-opacity="1">{2}</text>',Math.round(a.startX+a.xInterval*b+a.xInterval*50/100-d),a.startY+Math.round(a.yInterval*65/100),a.arrXAxis[b])}for(var b=0;b<=a._valueAxisLines;b++)c=c+String.format('<text id="ValueAxis" x="{0}" y="{1}">{2}</text>',a.startX-(a.roundedTickRange*10*b/10).toString().length*5.5-10,a.startY-a.yInterval*b+3.5,a.roundedTickRange*10*b/10);if(a.yMin<0)for(var b=1;b<=a._valueAxisLines;b++)c=c+String.format('<text id="ValueAxis" x="{0}" y="{1}">-{2}</text>',a.startX-(a.roundedTickRange*10*b/10).toString().length*5.5-15,a.startY+a.yInterval*b,a.roundedTickRange*10*b/10);return c},initializeSVG:function(){var b=this,a=String.format('<?xml-stylesheet type="text/css" href="{0}.css"?>',b._theme);a=a+String.format('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="{0}" height="{1}" style="position: relative; display: block;">',b._chartWidth,b._chartHeight);a=a+"<defs>";a=a+'<linearGradient gradientTransform="rotate(0)">';a=a+'<stop offset="0%" id="LinearGradient-Stop1"></stop>';a=a+'<stop offset="25%" id="LinearGradient-Stop2"></stop>';a=a+'<stop offset="100%" id="LinearGradient-Stop3"></stop></linearGradient>';a=a+"</defs>";a=a+String.format('<path fill="none" stroke-opacity="1" fill-opacity="1" stroke-linejoin="round" stroke-linecap="square" d="M5 {0} {1} {0} {1} {2} 5 {2} z"/>',parseInt(b._chartHeight)*1/10+5,parseInt(b._chartWidth)-5,parseInt(b._chartHeight)-parseInt(b._chartHeight)*1/10);a=a+String.format('<path id="ChartBackGround" stroke="" d="M0 0 {0} 0 {0} {1} 0 {1} z"/>',b._chartWidth,b._chartHeight);a=a+String.format('<path fill="#fff" stroke-opacity="1" fill-opacity="0" stroke-linejoin="round" stroke-linecap="square" stroke="" d="M5 {0} {1} {0} {1} {2} 5 {2} z" />',parseInt(b._chartHeight)*1/10+5,parseInt(b._chartWidth)-5,parseInt(b._chartHeight)-parseInt(b._chartHeight)*1/10);return a},drawLines:function(){var a=this,e="",f=0,c,d;c=[];d=[];for(var b=0;b<a._series.length;b++){c[b]=a.startX;d[b]=a.startY}a.animateLines(a,c,d,0,0)},animateLines:function(a,j,l,b,d){var i=7.5,h=100,g='<text id="LegendText" x="{0}" y="{1}">{2}</text>',m='<path d="M{0} {1} {2} {3}" id="Line{4}" style="fill:{5};stroke:{5}"></path>',f='<circle id="Dot{2}" cx="{0}" cy="{1}" r="4" style="fill:{3};stroke:{3}" onmouseover="ShowTooltip(this, evt, {4}, \'{5}\')" onmouseout="HideTooltip(this, evt)"></circle>',e="</svg>";for(var c=0;c<a._series.length;c++){b=0;if(a._chartType==Sys.Extended.UI.ChartType.Stacked)for(k=0;k<=c;k++)b=parseFloat(b)+parseFloat(a._series[k].Data[d]);else b=a._series[c].Data[d];if(a._chartType==Sys.Extended.UI.ChartType.Stacked)if(a.arrCombinedData[d]>0)if(d>0)a._parentDiv.innerHTML=a._parentDiv.innerHTML.replace(e,"")+String.format(f,a.startX+a.xInterval*d+a.xInterval/2,a.startY-Math.round(b*(a.yInterval/a.roundedTickRange)),c+1,a._series[c].LineColor,b,a._areaDataLabel)+String.format(m,j[c],l[c],a.startX+a.xInterval*d+a.xInterval/2,a.startY-Math.round(b*(a.yInterval/a.roundedTickRange)),c+1,a._series[c].LineColor)+String.format(g,a.startX+a.xInterval*d+a.xInterval*20/h,a.startY-Math.round(b*(a.yInterval/a.roundedTickRange))-i,b);else a._parentDiv.innerHTML=a._parentDiv.innerHTML.replace(e,"")+String.format(f,a.startX+a.xInterval*d+a.xInterval/2,a.startY-Math.round(b*(a.yInterval/a.roundedTickRange)),c+1,a._series[c].LineColor,b,a._areaDataLabel)+String.format(g,a.startX+a.xInterval*d+a.xInterval*20/h,a.startY-Math.round(b*(a.yInterval/a.roundedTickRange))-i,b);else if(d>0)a._parentDiv.innerHTML=a._parentDiv.innerHTML.replace(e,"")+String.format(f,a.startX+a.xInterval*d+a.xInterval/2,a.startY-Math.round(b*(a.yInterval/a.roundedTickRange)),c+1,a._series[c].LineColor,b,a._areaDataLabel)+String.format(m,j[c],l[c],a.startX+a.xInterval*d+a.xInterval/2,a.startY-Math.round(b*(a.yInterval/a.roundedTickRange)),c+1,a._series[c].LineColor)+String.format(g,a.startX+a.xInterval*d+a.xInterval*20/h,a.startY-Math.round(b*(a.yInterval/a.roundedTickRange))+i,b);else a._parentDiv.innerHTML=a._parentDiv.innerHTML.replace(e,"")+String.format(f,a.startX+a.xInterval*d+a.xInterval/2,a.startY-Math.round(b*(a.yInterval/a.roundedTickRange)),c+1,a._series[c].LineColor,b,a._areaDataLabel)+String.format(g,a.startX+a.xInterval*d+a.xInterval*20/h,a.startY-Math.round(b*(a.yInterval/a.roundedTickRange))+i,b);else if(b>0)if(d>0)a._parentDiv.innerHTML=a._parentDiv.innerHTML.replace(e,"")+String.format(f,a.startX+a.xInterval*d+a.xInterval/2,a.startY-Math.round(b*(a.yInterval/a.roundedTickRange)),c+1,a._series[c].LineColor,b,a._areaDataLabel)+String.format(m,j[c],l[c],a.startX+a.xInterval*d+a.xInterval/2,a.startY-Math.round(b*(a.yInterval/a.roundedTickRange)),c+1,a._series[c].LineColor)+String.format(g,a.startX+a.xInterval*d+a.xInterval*20/h,a.startY-Math.round(b*(a.yInterval/a.roundedTickRange))-i,b);else a._parentDiv.innerHTML=a._parentDiv.innerHTML.replace(e,"")+String.format(f,a.startX+a.xInterval*d+a.xInterval/2,a.startY-Math.round(b*(a.yInterval/a.roundedTickRange)),c+1,a._series[c].LineColor,b,a._areaDataLabel)+String.format(g,a.startX+a.xInterval*d+a.xInterval*20/h,a.startY-Math.round(b*(a.yInterval/a.roundedTickRange))-i,b);else if(d>0)a._parentDiv.innerHTML=a._parentDiv.innerHTML.replace(e,"")+String.format(f,a.startX+a.xInterval*d+a.xInterval/2,a.startY-Math.round(b*(a.yInterval/a.roundedTickRange)),c+1,a._series[c].LineColor,b,a._areaDataLabel)+String.format(m,j[c],l[c],a.startX+a.xInterval*d+a.xInterval/2,a.startY-Math.round(b*(a.yInterval/a.roundedTickRange)),c+1,a._series[c].LineColor)+String.format(g,a.startX+a.xInterval*d+a.xInterval*20/h,a.startY-Math.round(b*(a.yInterval/a.roundedTickRange))+i,b);else a._parentDiv.innerHTML=a._parentDiv.innerHTML.replace(e,"")+String.format(f,a.startX+a.xInterval*d+a.xInterval/2,a.startY-Math.round(b*(a.yInterval/a.roundedTickRange)),c+1,a._series[c].LineColor,b,a._areaDataLabel)+String.format(g,a.startX+a.xInterval*d+a.xInterval*20/h,a.startY-Math.round(b*(a.yInterval/a.roundedTickRange))+i,b);j[c]=a.startX+a.xInterval*d+a.xInterval/2+3;l[c]=a.startY-Math.round(b*(a.yInterval/a.roundedTickRange))}d++;d<a.arrXAxisLength&&setTimeout(function(){a.animateLines(a,j,l,0,d)},400)},get_chartWidth:function(){return this._chartWidth},set_chartWidth:function(a){this._chartWidth=a},get_chartHeight:function(){return this._chartHeight},set_chartHeight:function(a){this._chartHeight=a},get_chartTitle:function(){return this._chartTitle},set_chartTitle:function(a){this._chartTitle=a},get_categoriesAxis:function(){return this._categoriesAxis},set_categoriesAxis:function(a){this._categoriesAxis=a},get_ClientSeries:function(){return this._series},set_ClientSeries:function(a){this._series=a},get_chartType:function(){return this._chartType},set_chartType:function(a){this._chartType=a},get_theme:function(){return this._theme},set_theme:function(a){this._theme=a},get_valueAxisLines:function(){return this._valueAxisLines},set_valueAxisLines:function(a){this._valueAxisLines=a},get_chartTitleColor:function(){return this._chartTitleColor},set_chartTitleColor:function(a){this._chartTitleColor=a},get_valueAxisLineColor:function(){return this._valueAxisLineColor},set_valueAxisLineColor:function(a){this._valueAxisLineColor=a},get_categoryAxisLineColor:function(){return this._categoryAxisLineColor},set_categoryAxisLineColor:function(a){this._categoryAxisLineColor=a},get_baseLineColor:function(){return this._baseLineColor},set_baseLineColor:function(a){this._baseLineColor=a},get_tooltipBackgroundColor:function(){return this.tooltipBackgroundColor},set_tooltipBackgroundColor:function(a){this.tooltipBackgroundColor=a},get_tooltipFontColor:function(){return this._tooltipFontColor},set_tooltipFontColor:function(a){this._tooltipFontColor=a},get_tooltipBorderColor:function(){return this._tooltipBorderColor},set_tooltipBorderColor:function(a){this._tooltipBorderColor=a},get_areaDataLabel:function(){return this._areaDataLabel},set_areaDataLabel:function(a){this._areaDataLabel=a}};Sys.Extended.UI.LineChart.registerClass("Sys.Extended.UI.LineChart",Sys.Extended.UI.ControlBase);Sys.registerComponent(Sys.Extended.UI.LineChart,{name:"LineChart",parameters:[{name:"ClientSeries",type:"LineChartSeries[]"}]});Sys.Extended.UI.ChartType=function(){throw Error.invalidOperation();};Sys.Extended.UI.ChartType.prototype={Basic:0,Stacked:1};Sys.Extended.UI.ChartType.registerEnum("Sys.Extended.UI.ChartType",false);