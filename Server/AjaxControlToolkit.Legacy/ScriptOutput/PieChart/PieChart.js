Type.registerNamespace("Sys.Extended.UI");Sys.Extended.UI.PieChart=function(c){var a=this;Sys.Extended.UI.PieChart.initializeBase(a,[c]);var b=a.get_id();b=b.replace("_ctl00","");a._parentDiv=document.getElementById(b+"__ParentDiv");a._chartWidth="300";a._chartHeight="300";a._chartTitle="";a._pieChartClientValues=null;a._theme="PieChart";a._chartTitleColor="";a.charLength=3.5};Sys.Extended.UI.PieChart.prototype={initialize:function(){Sys.Extended.UI.PieChart.callBaseMethod(this,"initialize");if(!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"))throw"Current version of browser does not support SVG.";this.generatePieChart()},dispose:function(){Sys.Extended.UI.PieChart.callBaseMethod(this,"dispose")},generatePieChart:function(){var d=100,a=this,m=parseInt(a._chartWidth)>parseInt(a._chartHeight)?(parseInt(a._chartHeight)-10)/3:(parseInt(a._chartWidth)-10)/3,n=parseInt(a._chartWidth)/2,o=parseInt(a._chartHeight)/2.25,b=String.format('<?xml-stylesheet type="text/css" href="{0}.css"?>',a._theme);b=String.format('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="{0}" height="{1}" style="position: relative; display: block;">',a._chartWidth,a._chartHeight);b=b+"<defs>";b=b+String.format('<radialGradient gradientUnits="userSpaceOnUse" r="{0}" fy="{1}" fx="{2}" cy="{1}" cx="{2}">',m,n,o);b=b+'<stop offset="0%" id="RadialGradient1"></stop>';b=b+'<stop offset="25%" id="RadialGradient2"></stop>';b=b+'<stop offset="100%" id="RadialGradient3"></stop></RadialGradient>';b=b+"</defs>";b=b+String.format('<path fill="none" stroke-opacity="1" fill-opacity="1" stroke-linejoin="round" stroke-linecap="square" d="M5 {0} {1} {0} {1} {2} 5 {2} z"/>',parseInt(a._chartHeight)*1/10+5,parseInt(a._chartWidth)-5,parseInt(a._chartHeight)-parseInt(a._chartHeight)*1/10);b=b+String.format('<path id="ChartBackGround" stroke="" d="M0 0 {0} 0 {0} {1} 0 {1} z"/>',a._chartWidth,a._chartHeight);b=b+String.format('<path fill="#ffffff" stroke-opacity="1" fill-opacity="0" stroke-linejoin="round" stroke-linecap="square" stroke="" d="M5 {0} {1} {0} {1} {2} 5 {2} z" />',parseInt(a._chartHeight)*1/10+5,parseInt(a._chartWidth)-5,parseInt(a._chartHeight)-parseInt(a._chartHeight)*1/10);b=b+String.format('<text x="{0}" y="{1}" id="ChartTitle" style="fill:{3}">{2}</text>',parseInt(a._chartWidth)/2-a._chartTitle.length*a.charLength,parseInt(a._chartHeight)*5/d,a._chartTitle,a._chartTitleColor);for(var j=parseInt(a._chartHeight)*82/d+5,f=7.5,s=7.5,g=5,q=0,c=0;c<a._pieChartClientValues.length;c++)q=q+a._pieChartClientValues[c].Category.length;var e=Math.round(q*5/2)+Math.round((f+g*2)*a._pieChartClientValues.length),p=false;if(e>parseInt(a._chartWidth)/2){e=e/2;p=true}b=b+"<g>";b=b+String.format('<path d="M{0} {1} {2} {1} {2} {3} {0} {3} z" id="LegendArea" stroke=""></path>',parseInt(a._chartWidth)*40/d-e/2,j,parseInt(a._chartWidth)*40/d+e/2,Math.round(parseInt(a._chartHeight)*97.5/d));for(var i=parseInt(a._chartWidth)*40/d-e/2+5+f+g,l=i,h=parseInt(a._chartWidth)*40/d-e/2+5,k=h,c=0;c<a._pieChartClientValues.length;c++){if(p&&c==Math.round(a._pieChartClientValues.length/2)){i=parseInt(a._chartWidth)*40/d-e/2+5+f+g;l=i;h=parseInt(a._chartWidth)*40/d-e/2+5;k=h;j=parseInt(a._chartHeight)*89/d+5;p=false}h=k;i=l;b=b+String.format('<path d="M{0} {1} {2} {1} {2} {3} {0} {3} z" id="Legend{4}" style="stroke:{6};fill:{5}"></path>',h,j+s,h+f,j+15,c+1,a._pieChartClientValues[c].PieChartValueColor,a._pieChartClientValues[c].PieChartValueStrokeColor);b=b+String.format('<text x="{0}" y="{1}" id="LegendText">{2}</text>',i,j+15,a._pieChartClientValues[c].Category);if(a._pieChartClientValues[c].Category.length>10){k=h+a._pieChartClientValues[c].Category.length*5.5+f+g*2;l=i+a._pieChartClientValues[c].Category.length*5.5+f+g*2}else{k=k+a._pieChartClientValues[c].Category.length*6+f+g*2;l=l+a._pieChartClientValues[c].Category.length*6+f+g*2}}b=b+"</g>";for(var t=0,r=0,y=0,x=0,u=0,B=0,C=0,D=0,v=n,w=o-m,z=n,A=o-m,c=0;c<a._pieChartClientValues.length;c++)r=r+Math.abs(parseFloat(a._pieChartClientValues[c].Data));a._parentDiv.innerHTML=b;a.drawSegments(a,0,t,r,m,y,x,u,n,B,o,C,z,A,v,w,D)},drawSegments:function(a,b,i,m,h,p,j,g,c,k,d,l,e,f,n,o,q){i=i+Math.abs(parseFloat(a._pieChartClientValues[b].Data));p=i/m*360;j=p*(Math.PI/180);g=(i-Math.abs(parseFloat(a._pieChartClientValues[b].Data))+Math.abs(parseFloat(a._pieChartClientValues[b].Data))/2)/m*360;g=g*(Math.PI/180);k=parseFloat(Math.sin(j)*h);l=parseFloat(Math.cos(j)*h);e=parseFloat(Math.sin(g)*(h+10));f=parseFloat(Math.cos(g)*(h+10));e=c+e>c?c+e:c+e-a._pieChartClientValues[b].Data.toString().length*this.charLength;f=d+-1*f<d?d+-1*f:d+-1*f+10;a._parentDiv.innerHTML=a._parentDiv.innerHTML.replace("</svg>","")+String.format('<g><path id="Segment{8}" d="M{0} {1} A {2} {2} 0 {3},1 {4} {5} L {6} {7} z" style="stroke:{10};fill:{9};"></path>',n,o,h,q,c+k,d+-1*l,c,d,b+1,a._pieChartClientValues[b].PieChartValueColor,a._pieChartClientValues[b].PieChartValueStrokeColor)+String.format('<text fill="#000000" style="font: 11px Arial,Helvetica,sans-serif" fill-opacity="1" y="{1}" x="{0}">{2}</text></g>',e,f,a._pieChartClientValues[b].Data)+"</svg>";n=c+k;o=d+-1*l;b++;b<a._pieChartClientValues.length&&setTimeout(function(){a.drawSegments(a,b,i,m,h,p,j,g,c,k,d,l,e,f,n,o,q)},400)},get_chartWidth:function(){return this._chartWidth},set_chartWidth:function(a){this._chartWidth=a},get_chartHeight:function(){return this._chartHeight},set_chartHeight:function(a){this._chartHeight=a},get_chartTitle:function(){return this._chartTitle},set_chartTitle:function(a){this._chartTitle=a},get_PieChartClientValues:function(){return this._pieChartClientValues},set_PieChartClientValues:function(a){this._pieChartClientValues=a},get_theme:function(){return this._theme},set_theme:function(a){this._theme=a},get_chartTitleColor:function(){return this._chartTitleColor},set_chartTitleColor:function(a){this._chartTitleColor=a}};Sys.Extended.UI.PieChart.registerClass("Sys.Extended.UI.PieChart",Sys.Extended.UI.ControlBase);Sys.registerComponent(Sys.Extended.UI.PieChart,{name:"PieChart",parameters:[{name:"PieChartValues",type:"PieChartValue[]"}]});